# Maintainer: xeyossr
# Description: ğŸš€ Terminalde TÃ¼rkÃ§e altyazÄ±lÄ± anime arama ve izleme aracÄ±
pkgname=anitr-cli
pkgver=4.5.0
pkgrel=1
pkgdesc="ğŸš€ Terminalde TÃ¼rkÃ§e altyazÄ±lÄ± anime arama ve izleme aracÄ±"
arch=('any')
url="https://github.com/xeyossr/anitr-cli"
license=('GPL3')
depends=('mpv')
makedepends=('go' 'git')

optdepends=(
  'rofi: X11 kullanÄ±cÄ±larÄ± iÃ§in GUI'
  'rofi-wayland: Wayland kullanÄ±cÄ±larÄ± iÃ§in GUI'
  'yt-dlp: Anime indirme Ã¶zelliÄŸi iÃ§in'
  'youtube-dl: Anime indirme Ã¶zelliÄŸi iÃ§in'
)

source=("${pkgname}-${pkgver}.tar.gz::https://github.com/xeyossr/anitr-cli/archive/refs/tags/v${pkgver}.tar.gz")
sha256sums=('SKIP')

build() {
  cd "$srcdir/$pkgname-$pkgver"

  export GOFLAGS="-mod=mod"
  go mod tidy
  go fmt ./...

  gobuildenv=$(go version)
  go build -o build/anitr-cli -ldflags="-X 'github.com/xeyossr/anitr-cli/internal/update.version=${pkgver}' -X 'github.com/xeyossr/anitr-cli/internal/update.buildEnv=${gobuildenv}'"
}

package() {
  cd "$srcdir/$pkgname-$pkgver"
  install -Dm755 build/anitr-cli "${pkgdir}/usr/bin/${pkgname}"
}
